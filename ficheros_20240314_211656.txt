### main.jsx
import React from "react";

import ReactDOM from "react-dom";
import { Meteor } from "meteor/meteor";
import { App } from "../imports/ui/App";

Meteor.startup(() => {
  const container = document.getElementById("react-target");
  ReactDOM.render(<App />, container);
});


### AppRoutes.jsx
import React from "react";
import { BrowserRouter, Routes, Route } from "react-router-dom";
import { useTracker } from "meteor/react-meteor-data";
import { Meteor } from "meteor/meteor";
import Header from "../ui/components/commons/Header";
import AuthenticatedHome from "../ui/pages/AuthenticatedHome"; // Componente para usuarios autenticados
import GuestHome from "../ui/pages/GuestHome"; // Componente para usuarios no autenticados
import Login from "../ui/user/Login";
import Register from "../ui/user/Register";
import NotFound from "../ui/pages/NotFound";
import ReadingRooms from "../ui/pages/ReadingRooms";
import BooksPage from "../ui/pages/BooksPage";

export const AppRoutes = () => {
  const userIsLoggedIn = useTracker(() => !!Meteor.userId());

  return (
    <BrowserRouter>
      {userIsLoggedIn && <Header />}{" "}
      {/* Mostrar el encabezado solo si el usuario estÃ¡ autenticado */}
      <Routes>
        <Route
          path="/"
          element={userIsLoggedIn ? <AuthenticatedHome /> : <GuestHome />}
        />
        {!userIsLoggedIn && <Route path="/login" element={<Login />} />}
        {!userIsLoggedIn && <Route path="/register" element={<Register />} />}
        <Route path="/reading-rooms" element={<ReadingRooms />} />
        <Route path="/books" element={<BooksPage />} />
        <Route path="*" element={<NotFound />} />
      </Routes>
    </BrowserRouter>
  );
};


### App.jsx
import React from "react";
import { AppRoutes } from "../routes/AppRoutes";

export const App = () => (
  <div>
    <AppRoutes />
  </div>
);


### Info.jsx
import React from 'react';
import { useFind, useSubscribe } from 'meteor/react-meteor-data';
import { LinksCollection } from '../api/links';

export const Info = () => {
  const isLoading = useSubscribe('links');
  const links = useFind(() => LinksCollection.find());

  if(isLoading()) {
    return <div>Loading...</div>;
  }

  return (
    <div>
      <h2>Learn Meteor!</h2>
      <ul>{links.map(
        link => <li key={link._id}>
          <a href={link.url} target="_blank">{link.title}</a>
        </li>
      )}</ul>
    </div>
  );
};


### NetflixCarousel.jsx
import React from "react";
import { Card, CardMedia, CardContent, Typography } from "@mui/material";

const NetflixCarousel = () => {
  // Dummy data for Netflix-style carousel
  const books = [
    { title: "Harry Potter", image: "https://example.com/harry-potter.jpg" },
    {
      title: "Lord of the Rings",
      image: "https://example.com/lord-of-the-rings.jpg",
    },
    {
      title: "To Kill a Mockingbird",
      image: "https://example.com/to-kill-a-mockingbird.jpg",
    },
    { title: "1984", image: "https://example.com/1984.jpg" },
    {
      title: "Pride and Prejudice",
      image: "https://example.com/pride-and-prejudice.jpg",
    },
    {
      title: "The Great Gatsby",
      image: "https://example.com/the-great-gatsby.jpg",
    },
    { title: "Moby Dick", image: "https://example.com/moby-dick.jpg" },
    {
      title: "The Catcher in the Rye",
      image: "https://example.com/the-catcher-in-the-rye.jpg",
    },
    {
      title: "Brave New World",
      image: "https://example.com/brave-new-world.jpg",
    },
    { title: "Animal Farm", image: "https://example.com/animal-farm.jpg" },
  ];

  return (
    <div className="netflix-carousel">
      {books.map((book, index) => (
        <Card key={index} className="netflix-card">
          <CardMedia
            component="img"
            alt={book.title}
            height="140"
            image={book.image}
          />
          <CardContent>
            <Typography variant="body2" color="text.secondary">
              {book.title}
            </Typography>
          </CardContent>
        </Card>
      ))}
    </div>
  );
};

export default NetflixCarousel;


### Header.jsx
import React from "react";
import {
  SwipeableDrawer,
  List,
  ListItem,
  ListItemIcon,
  MenuBook,
  ListItemText,
  IconButton,
  AppBar,
  Toolbar,
  Typography,
  Divider,
} from "@mui/material";
import MenuIcon from "@mui/icons-material/Menu";
import HomeIcon from "@mui/icons-material/Home";
import LibraryBooksIcon from "@mui/icons-material/LibraryBooks";
import AccountCircleIcon from "@mui/icons-material/AccountCircle";
import GroupIcon from "@mui/icons-material/Group";
import NotificationsIcon from "@mui/icons-material/Notifications";
import AddBoxIcon from "@mui/icons-material/AddBox";
import ExitToAppIcon from "@mui/icons-material/ExitToApp";
import { Meteor } from "meteor/meteor";
import { useNavigate } from "react-router-dom";
import { MenuBookTwoTone } from "@mui/icons-material";

export default function Header() {
  const [open, setOpen] = React.useState(false);
  const user = Meteor.user(); // Obtener el usuario actual
  const navigate = useNavigate();

  const handleDrawerOpen = () => {
    setOpen(true);
  };

  const handleDrawerClose = () => {
    setOpen(false);
  };

  const handleLogout = () => {
    Meteor.logout(); // Cerrar sesiÃ³n con Meteor
  };

  const iOS =
    typeof navigator !== "undefined" &&
    /iPad|iPhone|iPod/.test(navigator.userAgent);

  return (
    <div>
      <AppBar position="static">
        <Toolbar>
          <IconButton
            edge="start"
            color="inherit"
            aria-label="menu"
            onClick={handleDrawerOpen}
          >
            <MenuIcon />
          </IconButton>
          <Typography variant="h6">La LibrerÃ­a MÃ¡gica</Typography>
        </Toolbar>
      </AppBar>
      <SwipeableDrawer
        anchor="left"
        open={open}
        onClose={handleDrawerClose}
        onOpen={handleDrawerOpen}
      >
        <List>
          <ListItem button>
            <ListItemIcon>
              <HomeIcon />
            </ListItemIcon>
            <ListItemText primary="Inicio" />
          </ListItem>
          <ListItem button onClick={() => navigate("/reading-rooms")}>
            <ListItemIcon>
              <LibraryBooksIcon />
            </ListItemIcon>
            <ListItemText primary="Salas de Lectura" />
          </ListItem>
          <ListItem button onClick={() => navigate("/reading-rooms")}>
            <ListItemIcon>
              <MenuBookTwoTone />
            </ListItemIcon>
            <ListItemText primary="Libros" />
          </ListItem>
          <ListItem button>
            <ListItemIcon>
              <AccountCircleIcon />
            </ListItemIcon>
            <ListItemText primary="Perfil" />
          </ListItem>
          <ListItem button>
            <ListItemIcon>
              <GroupIcon />
            </ListItemIcon>
            <ListItemText primary="Amigos" />
          </ListItem>
          <ListItem button>
            <ListItemIcon>
              <NotificationsIcon />
            </ListItemIcon>
            <ListItemText primary="Notificaciones" />
          </ListItem>
        </List>
        {user && (
          <div style={{ marginTop: "auto" }}>
            <Divider />
            <ListItem button onClick={handleLogout}>
              <ListItemIcon>
                <ExitToAppIcon />
              </ListItemIcon>
              <ListItemText primary="Cerrar SesiÃ³n" />
            </ListItem>
          </div>
        )}
      </SwipeableDrawer>
      {/* Resto del contenido */}
    </div>
  );
}


### Logo.jsx
import React from "react";
import { styled } from "@mui/system";

const LogoImg = styled("img")({
  width: "150px",
  height: "150px",
  objectFit: "contain",
  marginBottom: "20px",
});

const Logo = () => (
  <LogoImg src="/images/magic_book_home.jpg" alt="LibrerÃ­a MÃ¡gica" />
);

export default Logo;


### AuthenticatedHome.jsx
import React from "react";
import {
  Button,
  Container,
  Typography,
  useTheme,
  Grid,
  Card,
  CardMedia,
  CardContent,
} from "@mui/material";
import { styled } from "@mui/system";

import NetflixCarousel from "../components/NetflixCarousel";
// Dummy data for Netflix-style carousel
const carouselBooks = [
  { id: 1, title: "Harry Potter", cover: "https://via.placeholder.com/150" },
  {
    id: 2,
    title: "El SeÃ±or de los Anillos",
    cover: "https://via.placeholder.com/150",
  },
  { id: 3, title: "La Odisea", cover: "https://via.placeholder.com/150" },
  { id: 4, title: "La Iliada", cover: "https://via.placeholder.com/150" },
  { id: 5, title: "Don Quijote", cover: "https://via.placeholder.com/150" },
  { id: 6, title: "Divergente", cover: "https://via.placeholder.com/150" },
  {
    id: 7,
    title: "Charlie y la Fabrica de Chocolate",
    cover: "https://via.placeholder.com/150",
  },
  // ... more books for the carousel
  // TODO: Insert Netflix-style carousel here
];
const books = [
  { id: 1, title: "Harry Potter", cover: "https://via.placeholder.com/150" },
  {
    id: 2,
    title: "El SeÃ±or de los Anillos",
    cover: "https://via.placeholder.com/150",
  },
  { id: 3, title: "1984", cover: "https://via.placeholder.com/150" },
  // ... mÃ¡s libros
];

const AuthenticatedHome = () => {
  const theme = useTheme();

  const AuthenticatedHomeContainer = styled(Container)`
    text-align: center;
    padding: ${theme.spacing(4)}px;
    background-color: ${theme.palette.background.paper};
    border-radius: ${theme.shape.borderRadius}px;
  `;

  const IntroText = styled(Typography)`
    font-size: 1.4em;
    margin: ${theme.spacing(3, 0)}px;
    color: ${theme.palette.text.primary};
  `;

  const ActionSection = styled("div")`
    margin: ${theme.spacing(3, 0)}px;
  `;

  const CreateRoomBtn = styled(Button)`
    background-color: ${theme.palette.primary.main};
    color: ${theme.palette.common.white};
    padding: ${theme.spacing(1, 2)}px;
    border-radius: ${theme.shape.borderRadius}px;
    &:hover {
      background-color: ${theme.palette.primary.dark};
    }
  `;

  const BookCard = styled(Card)`
    max-width: 220px;
    box-shadow: ${theme.shadows[5]};
  `;

  const BookCover = styled(CardMedia)`
    height: 300px;
  `;

  return (
    <AuthenticatedHomeContainer>
      <Typography variant="h4" component="h1">
        Bienvenido a La LibrerÃ­a MÃ¡gica ðŸ“šâœ¨
      </Typography>
      <IntroText>
        Descubre un mundo lleno de aventuras, misterios y conocimientos. Â¡Invita
        a tus amigos y compartan juntos la magia de la lectura!
      </IntroText>
      <ActionSection>
        <CreateRoomBtn>Crear Sala de Lectura</CreateRoomBtn>
      </ActionSection>
      <NetflixCarousel />
    </AuthenticatedHomeContainer>
  );
};

export default AuthenticatedHome;


### BooksPage.jsx
import React from "react";
import { Meteor } from "meteor/meteor";
import { useTracker } from "meteor/react-meteor-data";
import { Bookmeteors } from "../../api/books";
import { Grid, Card, CardContent, Typography, Box } from "@mui/material";

const BooksPage = () => {
  const books = useTracker(() => {
    const subscription = Meteor.subscribe("books");
    if (subscription.ready()) {
      console.log(Bookmeteors.find({}).fetch()); // DeberÃ­as ver los libros aquÃ­ tambiÃ©n
      return Bookmeteors.find({}).fetch();
    }
    return [];
  });

  if (!books) {
    return <div>Cargando libros...</div>;
  }

  return (
    <Grid container spacing={3}>
      {books.map((book) => (
        <Grid item xs={12} sm={6} md={4} key={book._id}>
          <Card>
            {book.cover ? (
              <img
                style={{ width: "100%", height: "140px", objectFit: "cover" }}
                src={book.cover}
                alt={book.title}
              />
            ) : (
              <Box
                style={{
                  width: "100%",
                  height: "140px",
                  backgroundColor: "#cccccc", // Color de fondo para la imagen faltante
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                  color: "black",
                }}
              >
                <Typography>No Image Available</Typography>
              </Box>
            )}
            <CardContent>
              <Typography gutterBottom variant="h5" component="div">
                {book.title}
              </Typography>
              <Typography variant="body2" color="text.secondary">
                {book.description || "Sin descripciÃ³n disponible"}
              </Typography>
            </CardContent>
          </Card>
        </Grid>
      ))}
    </Grid>
  );
};

export default BooksPage;


### GuestHome.jsx
import React from "react";
import { useNavigate } from "react-router-dom";
import {
  Container,
  Button,
  Typography,
  Box,
  useTheme,
  styled,
  useMediaQuery,
} from "@mui/material";
import StarBorderIcon from "@mui/icons-material/StarBorder";

const ImageContainer = styled("div")(({ theme }) => ({
  display: "flex",
  justifyContent: "center",
  width: "100%",
  marginTop: theme.spacing(4),
  marginBottom: theme.spacing(4),
}));

const Image = styled("img")(({ theme }) => ({
  width: "100%",
  maxWidth: "600px",
  height: "auto",
  borderRadius: theme.shape.borderRadius,
  boxShadow: theme.shadows[6],
}));

const WelcomeBanner = styled("div")(({ theme }) => ({
  backgroundImage:
    "linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('/images/magic_library_banner.webp')",
  backgroundSize: "cover",
  backgroundPosition: "center",
  color: "white",
  padding: theme.spacing(4),
  textAlign: "center",
  borderRadius: theme.shape.borderRadius,
  boxShadow: theme.shadows[6],
  display: "flex",
  flexDirection: "column",
  justifyContent: "center",
  [theme.breakpoints.down("sm")]: {
    padding: theme.spacing(2),
  },
}));

const WelcomeText = styled(Typography)(({ theme }) => ({
  textShadow: "2px 2px 8px rgba(0,0,0,0.7)",
}));

const StyledButton = styled(Button)(({ theme }) => ({
  margin: theme.spacing(1),
  padding: theme.spacing(1, 3),
  borderRadius: theme.shape.borderRadius,
  boxShadow: theme.shadows[2],
}));

const Testimonials = styled("div")(({ theme }) => ({
  marginTop: theme.spacing(5),
  textAlign: "center",
  padding: theme.spacing(0, 2),
}));

const Footer = styled("footer")(({ theme }) => ({
  backgroundColor: theme.palette.background.paper,
  padding: theme.spacing(6),
  textAlign: "center",
  borderTopLeftRadius: theme.shape.borderRadius * 2,
  borderTopRightRadius: theme.shape.borderRadius * 2,
  boxShadow: theme.shadows[2],
  marginTop: theme.spacing(8),
}));

const GuestHome = () => {
  const theme = useTheme();
  const navigate = useNavigate();
  const isMobile = useMediaQuery(theme.breakpoints.down("sm"));

  return (
    <Container
      sx={{
        display: "flex",
        flexDirection: "column",
        alignItems: "center",
        justifyContent: "center",
        minHeight: "100vh",
        backgroundColor: "#f0f0f0",
        padding: theme.spacing(3),
        boxSizing: "border-box",
      }}
    >
      <WelcomeBanner>
        <WelcomeText variant={isMobile ? "h4" : "h2"} component="div">
          Â¡Bienvenido a la LibrerÃ­a MÃ¡gica!
        </WelcomeText>
        <WelcomeText variant="h5" component="div" sx={{ mt: 2 }}>
          Descubre, explora y sumÃ©rgete en el mundo de los libros.
        </WelcomeText>
      </WelcomeBanner>

      <ImageContainer>
        <Image src="/images/magic_book_home.jpg" alt="Libro mÃ¡gico" />
      </ImageContainer>

      <Box
        sx={{
          display: "flex",
          flexDirection: "row",
          justifyContent: "center",
          width: "100%",
          gap: 2,
          flexWrap: "wrap",
        }}
      >
        <StyledButton variant="contained" onClick={() => navigate("/login")}>
          Iniciar sesiÃ³n
        </StyledButton>

        <StyledButton variant="contained" onClick={() => navigate("/register")}>
          RegÃ­strate
        </StyledButton>
      </Box>

      <Testimonials>
        <Typography variant="h6">Lo que dicen nuestros usuarios:</Typography>
        <Box display="flex" justifyContent="center" alignItems="center" mt={2}>
          <StarBorderIcon sx={{ mr: 1 }} />
          <Typography variant="body1">
            "Una experiencia Ãºnica e inolvidable..."
          </Typography>
        </Box>
      </Testimonials>

      <Footer>
        <Typography variant="body1" color="textSecondary">
          Â© 2024 La LibrerÃ­a MÃ¡gica. Todos los derechos reservados.
        </Typography>
      </Footer>
    </Container>
  );
};

export default GuestHome;


### NotFound.jsx
import React from "react";
import { Container, Typography, Box, Button } from "@mui/material";
import { styled } from "@mui/system";
import Logo from "../components/commons/Logo";

const StyledContainer = styled(Container)(({ theme }) => ({
  display: "flex",
  flexDirection: "column",
  alignItems: "center",
  justifyContent: "center",
  minHeight: "90vh",
  padding: theme.spacing(2),
  backgroundColor: "#f0f0f0",
  color: "#fff",
}));

const NotFound = () => {
  return (
    <StyledContainer maxWidth="xs">
      <Logo />
      <Typography component="h1" variant="h5" color="textPrimary">
        PÃ¡gina no encontrada
      </Typography>
      <Box mt={4} textAlign="center">
        <Typography variant="body2" color="textPrimary">
          Lo sentimos, la pÃ¡gina que estÃ¡s buscando no existe.
        </Typography>
      </Box>
      <Box mt={4}>
        <Button variant="contained" color="primary" href="/">
          Volver a inicio
        </Button>
      </Box>
    </StyledContainer>
  );
};

export default NotFound;


### ReadingRooms.jsx
import React from "react";
import {
  Card,
  CardContent,
  CardMedia,
  Typography,
  Divider,
  Box,
} from "@mui/material";

const MY_ROOMS = [
  {
    id: 1,
    bookImage: "url_to_harry_potter_image.jpg",
    title: "Harry Potter",
    users: 5,
    currentPage: 75,
    totalPages: 400,
  },
  {
    id: 2,
    bookImage: "url_to_lotr_image.jpg",
    title: "Lord of the Rings",
    users: 8,
    currentPage: 50,
    totalPages: 1000,
  },
];

const PUBLIC_ROOMS = [
  {
    id: 3,
    bookImage: "url_to_mockingbird_image.jpg",
    title: "To Kill a Mockingbird",
    users: 12,
    currentPage: 20,
    totalPages: 324,
  },
  {
    id: 4,
    bookImage: "url_to_1984_image.jpg",
    title: "1984",
    users: 7,
    currentPage: 10,
    totalPages: 268,
  },
];

const ReadingRoomCard = ({
  bookImage,
  title,
  users,
  currentPage,
  totalPages,
}) => (
  <Card sx={{ display: "flex", mb: 2 }}>
    <CardMedia
      component="img"
      image={bookImage}
      sx={{ width: "150px", height: "150px", objectFit: "cover" }}
    />
    <CardContent
      sx={{
        flex: "1",
        display: "flex",
        flexDirection: "column",
        justifyContent: "center",
      }}
    >
      <Typography variant="h6">{title}</Typography>
      <Typography variant="body2" color="text.secondary">
        ðŸ§‘â€ðŸ¤â€ðŸ§‘: {users}
      </Typography>
      <Typography variant="body1">
        PÃ¡gina: {currentPage}/{totalPages}
      </Typography>
    </CardContent>
  </Card>
);

const ReadingRooms = () => (
  <Box>
    <Typography variant="h5" gutterBottom>
      Mis Salas
    </Typography>
    {MY_ROOMS.map((room) => (
      <ReadingRoomCard key={room.id} {...room} />
    ))}

    <Typography variant="h5" sx={{ mt: 4, mb: 2 }}>
      Salas PÃºblicas
    </Typography>
    {PUBLIC_ROOMS.map((room) => (
      <ReadingRoomCard key={room.id} {...room} />
    ))}
  </Box>
);

export default ReadingRooms;


### Login.jsx
import React, { useState } from "react";
import { Meteor } from "meteor/meteor";
import { useNavigate } from "react-router-dom";
import { IconButton, InputAdornment, Alert } from "@mui/material";
import Visibility from "@mui/icons-material/Visibility";
import VisibilityOff from "@mui/icons-material/VisibilityOff";
import EditIcon from "@mui/icons-material/Edit";
import {
  Button,
  TextField,
  Container,
  Typography,
  Box,
  Link,
} from "@mui/material";
import {
  Google as GoogleIcon,
  Facebook as FacebookIcon,
} from "@mui/icons-material";
import { styled } from "@mui/system";
import Logo from "../components/commons/Logo";

const StyledContainer = styled(Container)(({ theme }) => ({
  display: "flex",
  flexDirection: "column",
  alignItems: "center",
  justifyContent: "center",
  minHeight: "90vh",
  padding: theme.spacing(2),
  backgroundColor: "#f0f0f0",
  color: "#fff",
}));

const LoginForm = styled("form")({
  width: "100%",
  marginTop: "20px",
});

const SocialButton = styled(Button)(({ theme }) => ({
  marginTop: theme.spacing(1),
}));

const Login = () => {
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [step, setStep] = useState("email");
  const [emailError, setEmailError] = useState(false);
  const [showPassword, setShowPassword] = useState(false);
  const [loginError, setLoginError] = useState(null); // Agrega esta lÃ­nea

  const navigate = useNavigate();

  const validateEmail = (email) => {
    return /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(email);
  };

  const handleEmailChange = (e) => {
    setEmail(e.target.value);
    setEmailError(false);
  };

  const handlePasswordChange = (e) => {
    setPassword(e.target.value);
  };

  const handleLogin = (e) => {
    e.preventDefault();
    if (!validateEmail(email)) {
      setEmailError(true);
      return;
    }
    if (step === "password") {
      Meteor.loginWithPassword(email, password, (err) => {
        if (err) {
          setLoginError(`Login failed: ${err.message}`); // Modifica esta lÃ­nea
        } else {
          // Redirigir al usuario a la pÃ¡gina principal
          navigate("/");
        }
      });
    } else {
      setStep("password");
    }
  };

  const handleEditEmail = () => {
    setStep("email");
  };

  const handlePasswordToggle = () => {
    setShowPassword(!showPassword);
  };

  const handleFacebookLogin = () => {
    Meteor.loginWithFacebook(
      { requestPermissions: ["public_profile"] },
      (err) => {
        if (err) {
          setLoginError(`Facebook Login failed: ${err.message}`); // Modifica esta lÃ­nea
        } else {
          navigate("/");
        }
      }
    );
  };

  const handleGoogleLogin = () => {
    Meteor.loginWithGoogle((err) => {
      if (err) {
        setLoginError(`Google Login failed: ${err.message}`); // Modifica esta lÃ­nea
      } else {
        navigate("/");
      }
    });
  };

  return (
    <StyledContainer maxWidth="xs">
      <Logo />
      <Typography component="h1" variant="h5" color="textPrimary">
        {step === "email" ? "Bienvenido de nuevo" : "Introduce tu contraseÃ±a"}
      </Typography>
      {loginError && <Alert severity="error">{loginError}</Alert>}
      <LoginForm noValidate onSubmit={handleLogin}>
        <TextField
          variant="outlined"
          margin="normal"
          required
          fullWidth
          id="email"
          label="DirecciÃ³n de correo"
          name="email"
          autoComplete="email"
          autoFocus
          value={email}
          onChange={handleEmailChange}
          error={emailError}
          helperText={emailError && "Por favor introduce un correo vÃ¡lido"}
          InputProps={{
            readOnly: step === "password",
            endAdornment: step === "password" && (
              <InputAdornment position="end">
                <IconButton edge="end" onClick={handleEditEmail}>
                  <EditIcon />
                </IconButton>
              </InputAdornment>
            ),
          }}
        />
        {step === "password" && (
          <TextField
            variant="outlined"
            margin="normal"
            required
            fullWidth
            id="password"
            label="ContraseÃ±a"
            type={showPassword ? "text" : "password"}
            name="password"
            value={password}
            onChange={handlePasswordChange}
            InputProps={{
              endAdornment: (
                <InputAdornment position="end">
                  <IconButton
                    edge="end"
                    aria-label="toggle password visibility"
                    onClick={handlePasswordToggle}
                  >
                    {showPassword ? <Visibility /> : <VisibilityOff />}
                  </IconButton>
                </InputAdornment>
              ),
            }}
          />
        )}
        {step === "password" && (
          <Box textAlign="left" marginTop={2}>
            <Link href="#" variant="body2">
              Â¿Has olvidado tu contraseÃ±a?
            </Link>
          </Box>
        )}
        <Button
          type="submit"
          fullWidth
          variant="contained"
          color="primary"
          sx={{ mt: 3, mb: 1 }}
        >
          Continuar
        </Button>
        <Box
          textAlign="center"
          marginTop={1}
          sx={{ display: "flex", justifyContent: "center" }}
        >
          <Typography variant="body2" color="textPrimary" sx={{ mr: 1 }}>
            Â¿No tienes cuenta?
          </Typography>
          <Link href="/register" variant="body2">
            RegÃ­strate
          </Link>
        </Box>
        {step === "email" && (
          <>
            <Typography
              variant="body1"
              align="center"
              color="textPrimary"
              sx={{ mt: 1 }}
            >
              {" "}
              O
            </Typography>
            <SocialButton
              variant="outlined"
              startIcon={<FacebookIcon />}
              fullWidth
              onClick={handleFacebookLogin}
            >
              Continuar con Facebook
            </SocialButton>
            <SocialButton
              variant="outlined"
              startIcon={<GoogleIcon />}
              fullWidth
              onClick={handleGoogleLogin}
            >
              Continuar con Google
            </SocialButton>
          </>
        )}
      </LoginForm>
    </StyledContainer>
  );
};

export default Login;


### Register.jsx
import React, { useState } from "react";
import { Meteor } from "meteor/meteor";
import { IconButton, InputAdornment } from "@mui/material";
import { useNavigate } from "react-router-dom";
import EditIcon from "@mui/icons-material/Edit";
import Visibility from "@mui/icons-material/Visibility";
import VisibilityOff from "@mui/icons-material/VisibilityOff";
import {
  Button,
  TextField,
  Container,
  Typography,
  Box,
  Link,
} from "@mui/material";
import {
  Google as GoogleIcon,
  Facebook as FacebookIcon,
} from "@mui/icons-material";
import { styled } from "@mui/system";
import Logo from "../components/commons/Logo";

const StyledContainer = styled(Container)(({ theme }) => ({
  display: "flex",
  flexDirection: "column",
  alignItems: "center",
  justifyContent: "center",
  minHeight: "90vh",
  padding: theme.spacing(2),
  backgroundColor: "#f0f0f0",
  color: "#fff",
}));

const RegisterForm = styled("form")({
  width: "100%",
  marginTop: "20px",
});

const SocialButton = styled(Button)(({ theme }) => ({
  marginTop: theme.spacing(1),
}));

const Register = () => {
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [step, setStep] = useState("email");
  const [emailError, setEmailError] = useState(false);
  const [showPassword, setShowPassword] = useState(false);
  const navigate = useNavigate();

  const validateEmail = (email) => {
    return /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(email);
  };

  const handleEmailChange = (e) => {
    setEmail(e.target.value);
    setEmailError(false);
  };

  const handleEditEmail = () => {
    setStep("email");
  };

  const handlePasswordChange = (e) => {
    setPassword(e.target.value);
  };

  const handleRegister = (e) => {
    e.preventDefault();
    if (!validateEmail(email)) {
      setEmailError(true);
      return;
    }

    if (step === "password") {
      Accounts.createUser({ email, password }, (err) => {
        if (err) {
          alert(err.reason);
        } else {
          navigate("/");
        }
      });
    } else {
      setStep("password");
    }
  };

  const handlePasswordToggle = () => {
    setShowPassword(!showPassword);
  };

  const handleFacebookLogin = () => {
    Meteor.loginWithFacebook(
      { requestPermissions: ["public_profile"] },
      (err) => {
        if (err) {
          alert(`Facebook login fails`);
        } else {
          navigate("/");
        }
      }
    );
  };

  const handleGoogleLogin = () => {
    Meteor.loginWithGoogle((err) => {
      if (err) {
        alert(`Google login fails`);
      } else {
        navigate("/");
      }
    });
  };

  return (
    <StyledContainer maxWidth="xs">
      <Logo />
      <Typography component="h1" variant="h5" color="textPrimary">
        {step === "email" ? "Registra tu cuenta" : "Registra tu cuenta"}
      </Typography>
      <RegisterForm noValidate onSubmit={handleRegister}>
        <TextField
          variant="outlined"
          margin="normal"
          required
          fullWidth
          id="email"
          label="DirecciÃ³n de correo"
          name="email"
          autoComplete="email"
          autoFocus
          value={email}
          onChange={handleEmailChange}
          error={emailError}
          helperText={emailError && "Por favor introduce un correo vÃ¡lido"}
          InputProps={{
            readOnly: step === "password",
            endAdornment: step === "password" && (
              <InputAdornment position="end">
                <IconButton edge="end" onClick={handleEditEmail}>
                  <EditIcon />
                </IconButton>
              </InputAdornment>
            ),
          }}
        />
        {step === "password" && (
          <TextField
            variant="outlined"
            margin="normal"
            required
            fullWidth
            id="password"
            label="ContraseÃ±a"
            type={showPassword ? "text" : "password"}
            name="password"
            value={password}
            onChange={handlePasswordChange}
            InputProps={{
              endAdornment: (
                <InputAdornment position="end">
                  <IconButton
                    edge="end"
                    aria-label="toggle password visibility"
                    onClick={handlePasswordToggle}
                  >
                    {showPassword ? <Visibility /> : <VisibilityOff />}
                  </IconButton>
                </InputAdornment>
              ),
            }}
          />
        )}
        <Button
          type="submit"
          fullWidth
          variant="contained"
          color="primary"
          sx={{ mt: 3, mb: 1 }}
        >
          Continuar
        </Button>
        <Box
          textAlign="center"
          marginTop={1}
          sx={{ display: "flex", justifyContent: "center" }}
        >
          <Typography variant="body2" color="textPrimary" sx={{ mr: 1 }}>
            Â¿Ya tienes cuenta?
          </Typography>
          <Link href="/login" variant="body2">
            Inicia sesiÃ³n
          </Link>
        </Box>
        {step === "email" && (
          <>
            <Typography
              variant="body1"
              align="center"
              color="textPrimary"
              sx={{ mt: 1 }}
            >
              {" "}
              O
            </Typography>
            <SocialButton
              variant="outlined"
              startIcon={<FacebookIcon />}
              fullWidth
              onClick={handleFacebookLogin}
            >
              Continuar con Facebook
            </SocialButton>
            <SocialButton
              variant="outlined"
              startIcon={<GoogleIcon />}
              fullWidth
              onClick={handleGoogleLogin}
            >
              Continuar con Google
            </SocialButton>
          </>
        )}
      </RegisterForm>
    </StyledContainer>
  );
};

export default Register;


